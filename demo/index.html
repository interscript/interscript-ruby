<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="../vendor/assets/javascripts/interscript.js"></script>
  </head>
  <body>
    <h1 style="text-align: center;">Interscript in JavaScript</h1>
    <div class="panel">
      <div class="panel-input">
        <label>System code: </label>
        <select id="sc">
          <script>
           Object.keys(InterscriptMaps).forEach(sc => {
             if (sc == "bgnpcgn-rus-Cyrl-Latn-1947") {
              document.write(`<option value="${sc}" selected>${sc}</option>`);
             } else {
              document.write(`<option value="${sc}">${sc}</option>`);
             }
           })
          </script>
        </select>
      </div>
      <div class="panel-input">
        <div class="src">
          <label>Source</label>
          <textarea id="src"></textarea>
        </div>
        <div class="tar">
          <label>Target</label>
          <textarea id="tar"></textarea>
        </div>
      </div>
      <div class="control">
        <input type="button" value="Convert" onClick="convert()"/>
      </div>
    </div>
  </body>
  <script>
    function convert(){
      var input = document.getElementById("src"),
          output = document.getElementById("tar"),
          sel = document.getElementById("sc");

      if (!input.value) {
        input.focus();
        return;
      };

      const system_code = sel.options[sel.selectedIndex].text;
      var result = Opal.Interscript.$transliterate(system_code, input.value);
      output.value = result;
      alert('Successfully done!');
    }
  </script>
</html>